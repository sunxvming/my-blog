<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta name="generator" content="pandoc" />




<link rel="stylesheet" href="../../../style.css" type="text/css" />



<script src="https://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
<script>
jQuery(document).ready(function(){
    jQuery('pre').each(function(){
        var el = jQuery(this).find('code');
        var code_block = el.html(); 
 
        if (el.length > 0) { 
            jQuery(this).addClass('prettyprint').html(code_block).attr('style', 'max-height:450px');
        } else { 
            jQuery(this).removeClass().addClass('prettyprint'); 
        }
    });
});
</script>

<script type="text/javascript" src="../../run_prettify.js"></script>

</head>


<body>
<div id="wrapper">

<!-- <div id="header"> -->
    <!-- <p class="header_titleline">忧郁的大能猫的博客</p> -->
    <!-- <p class="header_subline"><a href="/index.html">首页</a></p> -->
<!-- </div> -->



<style type="text/css">

#masthead .site-branding {
    margin-bottom: 7px;
}

#masthead .site-branding .site-title {
    font-size: 2.2rem;
    line-height: 1;
    text-transform: uppercase;
    margin: 0;
    margin-bottom: 0.5rem;
}


#masthead .site-description{
	margin:0px;
}




#masthead .site-branding .site-title a {
    display: inline-block;
    position: relative;
    top: -11px;
}

#masthead  a {
    <!-- color: #007bff; -->
    text-decoration: none;
    background-color: transparent;
}



.io-menu-desktop {
    display: block;
    text-align: right;
}
.io-menu-desktop span.io-menu-button-span {
    display: none;
}
.io-menu-desktop ul {
    padding: 0;
    margin: 0;
    list-style: none;
    background: transparent;
    display: block;
}
.io-menu-desktop ul > li {
    margin-right: -4px;
    display: inline-block;
    position: relative;
    height: 30px;
    color: #212529;
    font-size: 12px;
    text-transform: uppercase;
    text-shadow: 0 0 0 rgb(0 0 0 / 0%);
    font-weight: 400;
}
.io-menu-desktop ul > li > a {
    padding: 0;
    line-height: 29px;
    padding-left: 20px;
    padding-right: 20px;
    padding-top: 1px;
    color: #212529;
    font-size: 12px;
    text-transform: uppercase;
    text-shadow: 0 0 0 rgb(0 0 0 / 0%);
    font-weight: 400;
}
.io-menu-desktop a {
    display: block;
    -o-transition: none;
    -moz-transition: none;
    -webkit-transition: none;
    transition: none;
}
.io-menu-desktop > ul > li.current-menu-item > a, .io-menu-desktop > div > ul > li.current-menu-item > a {
    background: rgba(0, 0, 0, 0.01);
}
</style>


<header id="masthead" class="site-header row">
    <div class="site-branding col-sm-6">
        <span class="site-title" style="font-size: 2.2rem">
            <span>
                <img width="60px" height="60px"
                    src="http://www.sunxvming.com/wp-content/uploads/2019/10/QQ图片20191023170517.jpg">
            </span>


            <a href="http://www.sunxvming.com/" rel="home">忧郁的大能猫</a>
        </span>
        <p class="site-description">好奇的探索者，理性的思考者，踏实的行动者。</p>
    </div><!-- .site-branding -->

    <nav id="site-navigation" class="main-navigation col-sm-9">
        <div class="io-menu io-menu-desktop"><span class="io-menu-button io-menu-button-span">≡</span>

            <div class="menu-%e4%b8%bb%e8%8f%9c%e5%8d%95-container">
                <ul id="primary-menu" class="menu">
                    <li id="menu-item-38"
                        class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home menu-item-38">
                        <a href="http://www.sunxvming.com">首页</a></li>
                    <li id="menu-item-175"
                        class="menu-item menu-item-type-post_type menu-item-object-page menu-item-175"><a
                            href="http://www.sunxvming.com/all-articles">所有文章</a></li>
                    <li id="menu-item-176"
                        class="menu-item menu-item-type-post_type menu-item-object-page menu-item-176"><a
                            href="http://www.sunxvming.com/about">关于俺</a></li>
                </ul>
            </div>
        </div><!-- .io-menu -->
    </nav><!-- #site-navigation -->
</header>


 <!--if(title)-->

<p>Table of Contents:</p>
<div id="TOC">
<ul>
<li><a href="#格式">格式</a></li>
<li><a href="#模式">模式</a></li>
<li><a href="#sed的命令">sed的命令</a><ul>
<li><a href="#a命令和i命令">a命令和i命令</a></li>
</ul></li>
<li><a href="#正则表达式的东西">正则表达式的东西：</a></li>
<li><a href="#多个匹配">多个匹配</a></li>
</ul>
</div>
 <!--if(toc)-->

<p>sed 意为流编辑器（Stream Editor），在Shell脚本和Makefile中作为过滤器使用非常普遍，也就 是把前一个程序的输出引入sed的输入，经过一系列编辑命令转换为另一种格式输 出。 sed 和 vi 都源于早期UNIX的 ed 工具，所以很多 sed 命令和 vi 的末行命令是相同的 sed基本上就是玩正则模式匹配，所以，玩sed的人，正则表达式一般都比较强。</p>
<h2 id="格式">格式</h2>
<p>sed 命令行的基本格式为</p>
<pre><code>sed option &#39;script&#39; file1 file2 ...
sed option -f scriptfile file1 file2 ...</code></pre>
<p>script的格式为：/pattern/action pattern为正则表达式，默认使用Basic正则表达式规范 sed程序一行一行读出待处理文件，如果某一行 与 pattern 匹配，则执行相应的 action ，如果一条命令没有 pattern 而只有 action ， 这个 action 将 作用于待处理文件的每一行。</p>
<h2 id="模式">模式</h2>
<ul>
<li>/pattern/p 打印匹配 pattern 的行</li>
<li>/pattern/d 删除匹配 pattern 的行 sed 命令不会修改原文件，删除命令只表示某些行不打印输出，而不是从原文件中删去</li>
<li>/pattern/s/pattern1/pattern2/ 查找符合 pattern 的行，将该行第一个匹 配 pattern1 的字符串替换为 pattern2</li>
<li>/pattern/s/pattern1/pattern2/g 查找符合 pattern 的行，将该行所有匹 配 pattern1 的字符串替换为 pattern2 sed &quot;s/my/Hao Chen's/g&quot; pets.txt 默认是打印改变的内容，不改变原文件，可以使用文件重定向，也可以 使用-i直接改变文件内容 sed -i &quot;s/my/Hao Chen's/g&quot; pets.txt</li>
</ul>
<h2 id="sed的命令">sed的命令</h2>
<h3 id="a命令和i命令">a命令和i命令</h3>
<p>a命令就是append， i命令就是insert，它们是用来添加行的。如：</p>
<pre><code># 第二行之前插入aaaaa
sed &#39;2i aaaaaa&#39; test.txt
# 第二行之前插入aaaaa
sed &#39;2a aaaaaa&#39; test.txt
# 注意其中的/fish/a，这意思是匹配到/fish/后就追加一行
sed&quot;/fish/a This is my monkey, my monkey&#39;s name is wukong&quot;my.txt</code></pre>
<h2 id="正则表达式的东西">正则表达式的东西：</h2>
<ul>
<li><code>^</code> 表示一行的开头。如：<code>/^#/</code> 以#开头的匹配。</li>
<li><code>$</code> 表示一行的结尾。如：<code>/}$/</code> 以}结尾的匹配。</li>
<li><code>\&lt;</code> 表示词首。 如 <code>\&lt;abc</code> 表示以 abc 为首的詞。</li>
<li><code>\&gt;</code> 表示词尾。 如 <code>abc\&gt;</code> 表示以 abc 結尾的詞。</li>
<li><code>.</code> 表示任何单个字符。</li>
<li><code>*</code> 表示某个字符出现了0次或多次。</li>
<li><code>[ ]</code> 字符集合。 如：[abc]表示匹配a或b或c，还有[a-zA-Z]表示匹配所有的26个字符。如果其中有^表示反，如[^a]表示非a的字符</li>
</ul>
<h2 id="多个匹配">多个匹配</h2>
<p>如果我们需要一次替换多个模式，如：第一个模式把第一行到第三行的my替换成your，第二个则把第3行以（3，<span class="math">$）后的This替换成了That ``` sed '1,3s/my/your/g; 3,$</span>s/This/That/g'my.txt</p>
<pre><code>上面的命令等价于：（注：下面使用的是sed的-e命令行参数）</code></pre>
<p>sed -e '1,3s/my/your/g' -e '3,$s/This/That/g' my.txt</p>
<pre><code>



【在每一行最前面加点东西】</code></pre>
<p>sed 's/^/#/g' trans.sh</p>
<pre><code>【在每一行最后面加点东西】</code></pre>
<p>sed 's/<span class="math">$/#/g' trans.sh ``` 【指定行数的替换：只替换2到3行内容】 ``` sed &quot;2,3s/#/abcde/g&quot; trans.sh ``` 【最后一行添加文字】 ``` sed '$</span>a' test.txt</p>
<pre><code>$ 匹配文件的最后一行位置
a 命令在后面append


【删除最后一行】</code></pre>
<p>sed '$d' test.txt</p>
<pre><code>

【删除指定模式】</code></pre>
<p>sed -i '/^.host:/d' /etc/fstab</p>
<pre><code>【只替换每一行的第一个匹配的a】</code></pre>
<p>sed 's/a/A/1' test.txt ``` 把1替换成2就是第二个，3g就是替换第3个以后匹配的</p>

<div id="footer">
    <p class="footer_titleline">忧郁的大能猫的博客</p>
    <p class="footer_subline">Contact: sunxvming@gmail.com</p>
    <p class="footer_subline">声明: 本站如有侵权行为请及时通知至以上邮箱</p>
</div>
</div> <!--wrapper-->
</body>
</html>
