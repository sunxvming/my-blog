下图的5个凸多边形是已经生成的导航网格，多边形外部的区域为不可行走区域，current为起点，goal为终点，从图中就可以看出最短路径为图中红线，蓝色圈出的点为我们需要找出的点。所有多边形顶点均按**逆时针方向存储**

![](https://sxm-upload.oss-cn-beijing.aliyuncs.com/imgs/586cbcb0-e7aa-4a30-8dac-c885ca2f1f74.jpg)

（1）下图显示出各区域之间的入口，即多边形的临边。由图中可以看出每个临边均为起点穿出该多边形区域的边，故以下称该边为**穿出边**。

![](https://sxm-upload.oss-cn-beijing.aliyuncs.com/imgs/d92c569f-aeb1-449d-b7fc-8e078e0feafc.jpg)



（2）首先找到起始点所在的多边形和穿出边的两个端点，由起点连接两个端点，形成两个线段**lineLeft** 和**lineRight**。如下图。绿色圈表示左点，红色表示右点（左点、右点是根据多边形顶点保存顺序而来）。

![](https://sxm-upload.oss-cn-beijing.aliyuncs.com/imgs/f9e92ff9-665b-4d8d-82f2-cc615bf73481.jpg)



（3）继续找到下一个穿出边的两个端点，判断新的左点是否在lineLeft 和lineRigh之间，如果在，则更新lineLeft为起点到新左点的线段。

![](https://sxm-upload.oss-cn-beijing.aliyuncs.com/imgs/6a0cd0a6-4239-4932-81df-4b119e5e7670.jpg)



同样处理新穿出边的右点，如下图

![](https://sxm-upload.oss-cn-beijing.aliyuncs.com/imgs/73d25ff0-b3b2-4404-a89e-e166a1dca922.jpg)



该步最后得到两个新的线段，如下图。

![](https://sxm-upload.oss-cn-beijing.aliyuncs.com/imgs/e260d681-f348-4f53-b383-9c9f552b4b04.jpg)



（4） 继续判断下一个穿出边的两个端点，如下图，新的左点在lineLeft和lineRight的外面，则不更新线段。

![](https://sxm-upload.oss-cn-beijing.aliyuncs.com/imgs/e3371cb7-a6a7-4ae7-8de2-c56a413ac107.jpg)



下图说明新的右点在两条直线之间，更新lineRight。

![](https://sxm-upload.oss-cn-beijing.aliyuncs.com/imgs/b36427e0-81ec-4232-b918-6158967ee7a2.jpg)



该步最后得到两个新的线段，如下图。

![](https://sxm-upload.oss-cn-beijing.aliyuncs.com/imgs/b11733e7-bed7-449b-8d8d-368b0c8ee24e.jpg)



（5） 继续循环判断下一个穿出边的两个端点，该穿出边的两个端点都在lineRight的右侧，表示lineRight的终点即为路径的一个拐角点。

![](https://sxm-upload.oss-cn-beijing.aliyuncs.com/imgs/2db4de44-e6d6-4737-b511-1b0415770e18.jpg)



（6） 循环以上步骤都可以找到从起点到终点的一条完整路径。



## 参考链接
* [Nav导航网格寻路_导航网格寻路原理-CSDN博客](https://blog.csdn.net/ynnmnm/article/details/44833007)