<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta name="generator" content="pandoc" />




<link rel="stylesheet" href="../../.././css/style.css" />




<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Saira+Semi+Condensed%3A400%2C700&ver=4.9.18" type="text/css" />

<script src="https://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
<script>
jQuery(document).ready(function(){
    jQuery('pre').each(function(){
        var el = jQuery(this).find('code');
        var code_block = el.html(); 
 
        if (el.length > 0) { 
            jQuery(this).addClass('prettyprint').html(code_block).attr('style', 'max-height:450px');
        } else { 
            jQuery(this).removeClass().addClass('prettyprint'); 
        }
    });
});
</script>

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js?skin=desert"></script>

</head>


<body>
<div id="wrapper">


<style type="text/css">

#masthead .site-branding {
    margin-bottom: 7px;
}

#masthead .site-branding .site-title {
    font-size: 2.2rem;
    line-height: 1;
    text-transform: uppercase;
    margin: 0;
    margin-bottom: 0.5rem;
}


#masthead .site-description{
	margin:0px;
}




#masthead .site-branding .site-title a {
    display: inline-block;
    position: relative;
    top: -11px;
}

#masthead  a {
    <!-- color: #007bff; -->
    text-decoration: none;
    background-color: transparent;
}



.io-menu-desktop {
    display: block;
    text-align: right;
}
.io-menu-desktop span.io-menu-button-span {
    display: none;
}
.io-menu-desktop ul {
    padding: 0;
    margin: 0;
    list-style: none;
    background: transparent;
    display: block;
}
.io-menu-desktop ul > li {
    margin-right: -4px;
    display: inline-block;
    position: relative;
    height: 30px;
    color: #212529;
    font-size: 12px;
    text-transform: uppercase;
    text-shadow: 0 0 0 rgb(0 0 0 / 0%);
    font-weight: 400;
}
.io-menu-desktop ul > li > a {
    padding: 0;
    line-height: 29px;
    padding-left: 20px;
    padding-right: 20px;
    padding-top: 1px;
    color: #212529;
    font-size: 12px;
    text-transform: uppercase;
    text-shadow: 0 0 0 rgb(0 0 0 / 0%);
    font-weight: 400;
}
.io-menu-desktop a {
    display: block;
    -o-transition: none;
    -moz-transition: none;
    -webkit-transition: none;
    transition: none;
}
.io-menu-desktop > ul > li.current-menu-item > a, .io-menu-desktop > div > ul > li.current-menu-item > a {
    background: rgba(0, 0, 0, 0.01);
}



#colophon {
    margin-top: 70px;
    margin-bottom: 30px;
}
#colophon .site-info {
    text-align: center;
}

</style>


<header id="masthead" class="site-header row">
    <div class="site-branding col-sm-6">
        <span class="site-title" style="font-size: 2.2rem">
            <span>
                <img width="60px" height="60px"
                    src="https://sxm-upload.oss-cn-beijing.aliyuncs.com/imgs/16833443.jpg">
            </span>


            <a href="http://www.sunxvming.com/" rel="home">忧郁的大能猫</a>
        </span>
        <p class="site-description">好奇的探索者，理性的思考者，踏实的行动者。</p>
    </div><!-- .site-branding -->

    <nav id="site-navigation" class="main-navigation col-sm-9">
        <div class="io-menu io-menu-desktop"><span class="io-menu-button io-menu-button-span">≡</span>

            <div class="menu-%e4%b8%bb%e8%8f%9c%e5%8d%95-container">
                <ul id="primary-menu" class="menu">
                    <li id="menu-item-38"
                        class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home menu-item-38">
                        <a href="http://www.sunxvming.com">首页</a></li>
                    <li id="menu-item-175"
                        class="menu-item menu-item-type-post_type menu-item-object-page menu-item-175"><a
                            href="http://www.sunxvming.com/">所有文章</a></li>
                    <li id="menu-item-176"
                        class="menu-item menu-item-type-post_type menu-item-object-page menu-item-176"><a
                            href="http://www.sunxvming.com/blog/about-me.html">关于俺</a></li>
                </ul>
            </div>
        </div><!-- .io-menu -->
    </nav><!-- #site-navigation -->
</header>

<div id="header">
<h1 class="title">blog/A-IT/40-tools/postman</h1>
</div> <!--id="header"-->
 <!--if(title)-->

<p>Table of Contents:</p>
<div id="TOC">
<ul>
<li><a href="#为什么选择postman">为什么选择Postman?</a></li>
<li><a href="#如何使用">如何使用</a></li>
<li><a href="#如何将请求参数化">如何将请求参数化</a></li>
<li><a href="#postman变量">postman变量</a>
<ul>
<li><a href="#环境变量">环境变量</a></li>
</ul></li>
<li><a href="#如何创建postman-tests">如何创建Postman Tests</a></li>
<li><a href="#postman显示返回的base64图片验证码二维码">postman显示返回的base64图片验证码、二维码</a></li>
<li><a href="#postman模拟登录过程验证码登录token">postman模拟登录过程(验证码、登录、token)</a></li>
<li><a href="#如何对collections中的请求做批量测试">如何对collections中的请求做批量测试</a>
<ul>
<li><a href="#使用collection-runner运行集合">使用Collection runner运行集合</a></li>
<li><a href="#使用newman运行集合">使用Newman运行集合</a></li>
</ul></li>
<li><a href="#postman的导入和导出">postman的导入和导出</a></li>
<li><a href="#参考链接">参考链接</a></li>
</ul>
</div>
 <!--if(toc)-->

<h2 id="为什么选择postman">为什么选择Postman?</h2>
<ul>
<li>简单易用 - 要使用Postman，你只需登录自己的账户，只要在电脑上安装了Postman应用程序，就可以方便地随时随地访问文件。</li>
<li>使用集合 - Postman允许用户为他们的API调用创建集合。每个集合可以创建子文件夹和多个请求。这有助于组织测试结构。</li>
<li>多人协作 - 可以导入或导出集合和环境，从而方便共享文件。直接使用链接还可以用于共享集合。</li>
<li>创建环境 - 创建多个环境有助于减少测试重复(DEV/QA/STG/UAT/PROD)，因为可以为不同的环境使用相同的集合。这是参数化发生的地方，将在后续介绍。</li>
<li>创建测试 - 测试检查点(如验证HTTP响应状态是否成功)可以添加到每个API调用中，这有助于确保测试覆盖率。</li>
<li>自动化测试 - 通过使用集合Runner或Newman，可以在多个迭代中运行测试，节省了重复测试的时间。</li>
<li>调试 - Postman控制台有助于检查已检索到的数据，从而易于调试测试。</li>
<li>持续集成——通过其支持持续集成的能力，可以维护开发实践。</li>
</ul>
<p>Postman 有个 workspace 的概念，workspace 分 personal 和 team 类型。Personal workspace 只能自己查看的 API，Team workspace 可添加成员和设置成员权限，成员之间可共同管理 API。</p>
<h2 id="如何使用">如何使用</h2>
<p><img src="https://sxm-upload.oss-cn-beijing.aliyuncs.com/imgs/37ddb176-f6ee-4e2e-804c-fa3e9c38c733.jpg" /></p>
<h2 id="如何将请求参数化">如何将请求参数化</h2>
<p>数据参数化是Postman最有用的特征之一。你可以将使用到的变量进行参数化，而不是使用不同的数据创建相同的请求，这样会事半功倍，简洁明了。  <br />
这些数据可以来自<strong>数据文件</strong>或<strong>环境变量</strong>。参数化有助于避免重复相同的测试，可用于自动化迭代测试。</p>
<p>参数通过使用<strong>双花括号</strong>创建:<code>{{sample}}</code>。</p>
<h2 id="postman变量">postman变量</h2>
<p>postman 支持的变量的作用范围<br />
* Global<br />
全局变量在整个工作空间中都可用。</p>
<ul>
<li>Collection<br />
集合变量可在集合中的整个请求中使用，并且独立于环境，因此请不要根据所选环境进行更改。</li>
<li>Environment 环境变量使您可以针对不同的环境定制处理，例如本地开发与测试或生产</li>
<li>Data<br />
数据变量来自外部CSV和JSON文件，以定义在通过Newman或Collection Runner运行集合时可以使用的数据集</li>
<li>Local<br />
局部变量是临时的，只能在您的请求脚本中访问。</li>
</ul>
<h3 id="环境变量">环境变量</h3>
<p>在做测试的过程中，可能遇到频繁更换测试地址的操作，比如今天开发用了这个测试环境，明天又换了另一个测试环境活正式环境。<br />
在postman中可以设置不同的环境变量以进行不同的环境测试，操作如下：<br />
<img src="https://sxm-upload.oss-cn-beijing.aliyuncs.com/imgs/ca85f161-bc2c-4659-9e02-63de11231c90.png" /></p>
<p>选择环境变量的位置在右上角，并且旁边的小眼睛图片可以查看此环境的所有变量<br />
<img src="https://sxm-upload.oss-cn-beijing.aliyuncs.com/imgs/0bb93362-7c61-4c6b-8637-16c201608168.png" /></p>
<h2 id="如何创建postman-tests">如何创建Postman Tests</h2>
<p>Postman Tests在请求中添加JavaScript代码来协助验证结果，如：成功或失败状态、预期结果的比较等等。<br />
例如如下测试返回值是否为200<br />
<img src="https://sxm-upload.oss-cn-beijing.aliyuncs.com/imgs/16e299b9-06b0-455c-aa20-dd7bfe5ff27c.jpg" /><br />
测试通过了会在下面显示：<br />
<img src="https://sxm-upload.oss-cn-beijing.aliyuncs.com/imgs/ad504a29-841a-4f99-bf0e-ac9697a53dcb.jpg" /></p>
<h2 id="postman显示返回的base64图片验证码二维码">postman显示返回的base64图片验证码、二维码</h2>
<p>postman可以创建一个工作流按顺序测试多个接口，并可以将前面的接口的返回值作为变量传递给后面的接口使用。</p>
<p>在开发中，有些接口返回的数据是base64的图片数据，有时需要实时查看，如图片验证码、二维码等。</p>
<p>在postman的tests输入JS代码，点击SEND</p>
<pre><code>// 将接口返回数据赋值处理
var data = {
    response: pm.response.json()
}
// html 模板字符
// 如果base64代码中已包含“data:image/jpg;base64,”，需要在base64代码前面加上，如下：
var template = `&lt;html&gt;&lt;img src=&quot;{{response.data}}&quot; /&gt;&lt;/html&gt;`;

// 设置 visualizer 数据。传模板并解析对象。
pm.visualizer.set(template, data);</code></pre>
<p>效果如下：<br />
<img src="https://sxm-upload.oss-cn-beijing.aliyuncs.com/imgs/fba1744a-261c-408d-ac0d-cfa235b9f341.png" /></p>
<h2 id="postman模拟登录过程验证码登录token">postman模拟登录过程(验证码、登录、token)</h2>
<p>1.获取图片验证码，这一步若没有图片识别，就只能人工识别了。<br />
2.用用户名、密码、验证码进行登录<br />
3.登录接口获取到的token保存到全局变量中，并设置到之后请求的header中</p>
<h2 id="如何对collections中的请求做批量测试">如何对collections中的请求做批量测试</h2>
<h3 id="使用collection-runner运行集合">使用Collection runner运行集合</h3>
<p><img src="https://sxm-upload.oss-cn-beijing.aliyuncs.com/imgs/50970bae-e718-4f93-a425-95ab0a5de358.png" /></p>
<h3 id="使用newman运行集合">使用Newman运行集合</h3>
<p>运行集合的另一种方式是通过Newman。Newman和Collection Runner之间的主要区别如下:<br />
1. Newman是Postman的替代品，所以需要单独安装Newman；<br />
2. Newman使用命令行，而Collection Runner使用UI界面；<br />
3. Newman可以用于持续集成。</p>
<p><strong>安装newman</strong><br />
1.下载并安装nodejs<br />
2.下载newman：<code>npm install -g newman</code></p>
<p><strong>newman的使用</strong><br />
其中的<code>&lt;collection name&gt;</code>和<code>&lt;environment name&gt;</code>是postman中导出的collection文件和environment文件。</p>
<p>关于Newman的一些基础指导如下：<br />
1、只运行集合（如果没有环境或测试数据文件依赖关系，则可以使用此选项。）</p>
<pre><code>newman run &lt;collection name&gt;</code></pre>
<p>2、运行集合和环境（参数-e 是environment）</p>
<pre><code>newman run &lt;collection name&gt; -e &lt;environment name&gt;</code></pre>
<p>3、使用所需的编号运行集合的迭代。</p>
<pre><code>newman run &lt;collection name&gt; -n &lt;no.of iterations&gt;</code></pre>
<p>4、运行数据文件</p>
<pre><code>newman run &lt;collection name&gt; --data &lt;file name&gt;  -n &lt;no.of iterations&gt; -e &lt;environment name&gt;</code></pre>
<p>5、设置延迟时间。(这一点很重要，因为如果由于请求在后台服务器上，完成前一个请求时没有延迟时间直接启动下一个请求，测试可能会失败。)</p>
<pre><code>newman run &lt;collection name&gt; -d &lt;delay time&gt;</code></pre>
<h2 id="postman的导入和导出">postman的导入和导出</h2>
<p><strong>collections</strong><br />
postman的collections可以用文件的方式导入和导出，也可以生成 public link让其他人进行导入。这个public link修改后是不进行同步的。</p>
<p><strong>environments</strong><br />
在导出collections的时候是不能顺便导出环境变量的，环境变量得单独的进行导出。</p>
<h2 id="参考链接">参考链接</h2>
<ul>
<li><a href="https://www.cnblogs.com/softwaretesterpz/p/13205666.html">API测试之Postman使用完全指南(Postman教程，这篇文章就够了)</a></li>
<li><a href="https://blog.csdn.net/weixin_33725722/article/details/88678349">使用postman创建collection测试接口</a></li>
</ul>

<footer id="colophon" >
		<div class="site-info col">
			Powered by <a href="https://github.com/sunxvming/my-blog">my-blog</a>
			<span class="sep"> | </span>
				<span><a target="_blank" href="http://beian.miit.gov.cn">【京ICP备19018538号】</a></span>
			<span><a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010502037753">【京公网安备 11010502037753号】</a></span>
		</div><!-- .site-info col -->
        <div class="site-info col"> This page is hosted at <a target="_blank" href="https://github.com/sunxvming">Github</a>.To see the source code you can visit the <a target="_blank" href="https://github.com/sunxvming/my-blog">repo</a> and I'd be glad if you like and star it.</div>
</footer>
</div> <!--wrapper-->
</body>
</html>
