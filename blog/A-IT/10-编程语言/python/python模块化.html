<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta name="generator" content="pandoc" />



<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="../../../.././css/style.css" />




<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Saira+Semi+Condensed%3A400%2C700&ver=4.9.18" type="text/css" />

<script src="https://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
<script>
jQuery(document).ready(function(){
    jQuery('pre').each(function(){
        var el = jQuery(this).find('code');
        var code_block = el.html(); 
 
        if (el.length > 0) { 
            jQuery(this).addClass('prettyprint').html(code_block).attr('style', 'max-height:450px');
        } else { 
            jQuery(this).removeClass().addClass('prettyprint'); 
        }
    });
});
</script>

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js?skin=desert"></script>

</head>


<body>
<div id="wrapper">


<style type="text/css">

#masthead .site-branding {
    margin-bottom: 7px;
}

#masthead .site-branding .site-title {
    font-size: 2.2rem;
    line-height: 1;
    text-transform: uppercase;
    margin: 0;
    margin-bottom: 0.5rem;
}


#masthead .site-description{
	margin:0px;
}




#masthead .site-branding .site-title a {
    display: inline-block;
    position: relative;
    top: -11px;
}

#masthead  a {
    <!-- color: #007bff; -->
    text-decoration: none;
    background-color: transparent;
}



.io-menu-desktop {
    display: block;
    text-align: right;
}
.io-menu-desktop span.io-menu-button-span {
    display: none;
}
.io-menu-desktop ul {
    padding: 0;
    margin: 0;
    list-style: none;
    background: transparent;
    display: block;
}
.io-menu-desktop ul > li {
    margin-right: -4px;
    display: inline-block;
    position: relative;
    height: 30px;
    color: #212529;
    font-size: 12px;
    text-transform: uppercase;
    text-shadow: 0 0 0 rgb(0 0 0 / 0%);
    font-weight: 400;
}
.io-menu-desktop ul > li > a {
    padding: 0;
    line-height: 29px;
    padding-left: 20px;
    padding-right: 20px;
    padding-top: 1px;
    color: #212529;
    font-size: 12px;
    text-transform: uppercase;
    text-shadow: 0 0 0 rgb(0 0 0 / 0%);
    font-weight: 400;
}
.io-menu-desktop a {
    display: block;
    -o-transition: none;
    -moz-transition: none;
    -webkit-transition: none;
    transition: none;
}
.io-menu-desktop > ul > li.current-menu-item > a, .io-menu-desktop > div > ul > li.current-menu-item > a {
    background: rgba(0, 0, 0, 0.01);
}



#colophon {
    margin-top: 70px;
    margin-bottom: 30px;
}
#colophon .site-info {
    text-align: center;
}

</style>


<header id="masthead" class="site-header row">
    <div class="site-branding col-sm-6">
        <span class="site-title" style="font-size: 2.2rem">
            <span>
                <img width="60px" height="60px"
                    src="https://sxm-upload.oss-cn-beijing.aliyuncs.com/imgs/16833443.jpg">
            </span>


            <a href="http://www.sunxvming.com/" rel="home">忧郁的大能猫</a>
        </span>
        <p class="site-description">好奇的探索者，理性的思考者，踏实的行动者。</p>
    </div><!-- .site-branding -->

    <nav id="site-navigation" class="main-navigation col-sm-9">
        <div class="io-menu io-menu-desktop"><span class="io-menu-button io-menu-button-span">≡</span>

            <div class="menu-%e4%b8%bb%e8%8f%9c%e5%8d%95-container">
                <ul id="primary-menu" class="menu">
                    <li id="menu-item-38"
                        class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home menu-item-38">
                        <a href="http://www.sunxvming.com">首页</a></li>
                    <li id="menu-item-175"
                        class="menu-item menu-item-type-post_type menu-item-object-page menu-item-175"><a
                            href="http://www.sunxvming.com/">所有文章</a></li>
                    <li id="menu-item-176"
                        class="menu-item menu-item-type-post_type menu-item-object-page menu-item-176"><a
                            href="http://www.sunxvming.com/blog/about-me.html">关于俺</a></li>
                </ul>
            </div>
        </div><!-- .io-menu -->
    </nav><!-- #site-navigation -->
</header>

<div id="header">
<h1 class="title">blog/A-IT/10-编程语言/python/python模块化</h1>
</div> <!--id="header"-->
 <!--if(title)-->

<p>Table of Contents:</p>
<div id="TOC">
<ul>
<li><a href="#单文件作为模块">单文件作为模块</a>
<ul>
<li><a href="#简单模块化">简单模块化</a></li>
<li><a href="#模块文件系统目录检索顺序">模块文件系统目录检索顺序</a></li>
</ul></li>
<li><a href="#name__的作用"><code>__name__</code>的作用</a></li>
<li><a href="#目录作为模块">目录作为模块</a>
<ul>
<li><a href="#init__.py作用"><code>__init__.py</code>作用</a></li>
</ul></li>
</ul>
</div>
 <!--if(toc)-->

<h2 id="单文件作为模块">单文件作为模块</h2>
<p>可以将代码保存到一个名为 mycode.py 的文件中 —— 这样可以被外部调用的 .py 文件，有个专门的称呼，模块（Module）</p>
<h3 id="简单模块化">简单模块化</h3>
<p><strong>模块导入</strong><br />
* <code>import moudle_name</code> 导入整个模块<br />
* <code>from mycode import *</code> 全部导入<br />
* <code>import moudle_name as alias</code> 导入整个模块，并用别名<br />
* <code>from mycode import is_prime as isp</code> 导入单个并别名<br />
* <code>from module_name import function_name, variable_name, class_name</code> ，导入模块的一部分<br />
* <code>import foo.bar 或者 from foo import bar</code> 导入 <code>foo</code> 这个目录中的 <code>bar.py</code> 这个模块文件</p>
<ol>
<li>说到最简单的模块化方式，你可以把函数、类、常量拆分到不同的文件，把它们放在同一个文件夹，然后使用<br />
<code>from your_file import function_name, class_name</code> 的方式调用</li>
<li>若出现文件夹，只需要使用 . 代替 / 来表示子目录</li>
<li>如果我们想调用上层目录呢？<code>sys.path.append("..")</code> 表示将上级目录也添加到path路径</li>
</ol>
<h3 id="模块文件系统目录检索顺序">模块文件系统目录检索顺序</h3>
<p>对于一个独立的项目，所有的模块的追寻方式，最好从项目的根目录开始追溯，这叫做<strong>相对的绝对路径</strong>。<br />
Python 解释器在遇到 import 的时候，它会在1.一个特定的列表中寻找模块 2.文件的当前目录。这个特定的列表，可以用下面的方式拿到：</p>
<pre><code>print(sys.path)
########## 输出 ##########
[&#39;&#39;, &#39;/usr/lib/python36.zip&#39;, &#39;/usr/lib/python3.6&#39;, &#39;/usr/lib/python3.6/lib-dynload&#39;, &#39;/usr/local/lib/python3.6/dist-packages&#39;, &#39;/usr/lib/python3/dist-packages&#39;]</code></pre>
<blockquote>
<p> * 先去看内建模块里有没有你所指定的名称；<br />
 * 如果没有，那么就按照 <code>sys.path</code> 所返回的目录列表顺序去找。</p>
</blockquote>
<p>可以通过以下代码查看你自己当前机器的 <code>sys.path</code>：</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a>import sys</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a>sys.path</span></code></pre></div>
<p>在 <code>sys.path</code> 所返回的目录列表中，你<strong>当前的工作目录</strong>排在第一位。<br />
有时，你需要指定检索目录，因为你知道你要用的模块文件在什么位置，那么可以用 <code>sys.path.append()</code> 添加一个搜索位置：</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a>import sys</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a>sys.path.append(<span class="st">&quot;/My/Path/To/Module/Directory&quot;</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a>import my_module</span></code></pre></div>
<p>dir() 函数<br />
你的函数，保存在模块里之后，这个函数的用户（当然也包括你），可以用 dir() 函数查看模块中可访问的变量名称和函数名称，返回一个list</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a><span class="im">import</span> math</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a><span class="bu">print</span>(<span class="bu">dir</span>(math))</span></code></pre></div>
<h2 id="name__的作用"><code>__name__</code>的作用</h2>
<p>import 在导入文件的时候，会自动把所有<strong>暴露在外面的代码</strong>全都执行一遍。因此，如果你要把一个东西封装成模块，又想让它可以执行的话，你必须将要执行的代码放在 <code>if __name__ == '__main__'</code>下面。<br />
<code>__name__</code> 作为 Python 的<strong>魔术内置参数</strong>，本质上是模块对象的一个属性。<br />
我们使用 <code>import</code> 语句时，<code>__name__</code> 就会被赋值为该模块的名字，自然就不等于__main__了。<br />
而当一个模块<strong>被命令行运行</strong>的时候，这个模块的 <code>__name__</code> 就被 Python 解释器设定为 <code>'__main__'</code>。</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a>if __name__ <span class="op">==</span> <span class="st">&#39;__main__&#39;</span>:</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true"></a>    main()</span></code></pre></div>
<p>这么做的结果是：</p>
<blockquote>
<p> 1. 当 Python 文件被当作模块，被 <code>import</code> 语句导入时，<code>if</code> 判断失败，<code>main()</code> 函数不被执行；<br />
 2. 当 Python 文件被 <code>python -m</code> 或<code>python xx.py</code>运行的时候，<code>if</code> 判断成功，<code>main()</code> 函数才被执行。</p>
</blockquote>
<h2 id="目录作为模块">目录作为模块</h2>
<h3 id="init__.py作用"><code>__init__.py</code>作用</h3>
<p>1. 标识该目录是一个python的模块包<br />
这个文件其实可以什么也不定义；可以只是一个空文件，但是必须存在。如果 <code>__init__.py</code> 不存在，这个目录就仅仅是一个目录，而不是一个包，它就不能被导入或者包含其它的模块和嵌套包。</p>
<p>2. 简化模块导入操作<br />
如果目录中包含了 <code>__init__.py</code> 时，当用 <code>import</code> 导入该目录时，会执行 <code>__init__.py</code> 里面的代码。这样我们可以在里面添加简化模块导入的代码。</p>
<p>3. 导入模块中的所有内容</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a>from mypackage import <span class="op">*</span></span></code></pre></div>
<p><code>__init__.py</code> 中还有一个重要的变量，叫做 <code>__all__</code>。<br />
<code>__all__</code> 关联了一个模块列表，当执行 <code>from xx import *</code> 时，就会导入<code>__all__</code>列表中的模块。<br />
比如：</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true"></a>__all__ <span class="op">=</span> [<span class="st">&#39;subpackage_1&#39;</span>, <span class="st">&#39;subpackage_2&#39;</span>]</span></code></pre></div>
<p>可以去python的内置库看例子，windows下位于：<code>Python311\Lib</code></p>

<footer id="colophon" >
		<div class="site-info col">
			Powered by <a href="https://github.com/sunxvming/my-blog">my-blog</a>
			<span class="sep"> | </span>
				<span><a target="_blank" href="http://beian.miit.gov.cn">【京ICP备19018538号】</a></span>
			<span><a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010502037753">【京公网安备 11010502037753号】</a></span>
		</div><!-- .site-info col -->
        <div class="site-info col"> This page is hosted at <a target="_blank" href="https://github.com/sunxvming">Github</a>.To see the source code you can visit the <a target="_blank" href="https://github.com/sunxvming/my-blog">repo</a> and I'd be glad if you like and star it.</div>
</footer>
</div> <!--wrapper-->
</body>
</html>
